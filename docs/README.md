# 股值通 - 股票市值查询微信小程序

## 项目简介

股值通是一款专注于股票市值查询和分析的微信小程序，提供实时股票搜索、历史市值图表、实际换手率分析等功能。

## 核心功能

### 📊 股票搜索与查询
- 支持股票代码和名称搜索
- 实时搜索结果展示
- 热门股票推荐
- 搜索历史记录

### 📈 市值数据分析
- 历史市值走势图表
- 多时间范围查看（1年/3年/5年/10年/全部）
- 市值分位数计算
- 最高/最低/平均值统计

### 🔄 实际换手率分析
- 实际换手率历史数据
- 流动性折价/溢价判断
- 稳定股东比例展示

### ⭐ 个人中心
- 自选股票管理
- 最近搜索记录
- 数据本地存储

## 技术架构

### 前端技术栈
- **微信小程序原生框架**
- **ECharts** - 图表展示
- **Swiper** - 页面滑动切换

### 核心模块

#### 1. 页面结构
```
pages/
├── index/          # 首页（搜索、列表）
└── detail/         # 详情页（图表、分析）
```

#### 2. 工具模块
```
utils/
├── api.js          # API接口封装
├── util.js         # 通用工具函数
└── track.js        # 用户行为埋点
```

#### 3. 组件系统
```
components/
├── simple-chart/   # 简单图表组件
└── stock-compare/  # 股票对比组件
```

## 关键特性

### 🎯 用户体验优化

#### 智能默认页面
- 首次进入：显示热门搜索
- 有自选股：默认显示自选列表
- 状态记忆：保持用户离开前的位置

#### 流畅交互体验  
- 左右滑动切换tab页面
- 防抖搜索优化
- 滑动删除操作
- 触觉反馈

#### 导航状态保持
- 从不同列表进入详情页后返回，保持原有列表状态
- 只有搜索结果页面返回时才清除搜索状态

### 📱 响应式设计
- 适配不同屏幕尺寸
- 安全区域自动适配
- 动态计算布局参数

### 📊 数据可视化
- ECharts图表集成
- 多时间维度切换
- 数据类型动态切换
- 统计信息实时计算

### 🔍 智能搜索
- 实时搜索建议
- 搜索历史管理
- 热门股票推荐
- 防抖输入优化

## 数据分析算法

### 分位数计算
```javascript
// 计算当前值在历史数据中的分位数
const countBelow = dataArray.filter(val => val < currentValue).length
const percentile = ((countBelow / dataArray.length) * 100).toFixed(1)
```

### 流动性判断
```javascript
// 基于实际换手率判断流动性
const liquidityType = currentTurnover < 5 ? 'discount' : 'premium'
const liquidityLabel = currentTurnover < 5 ? '流动性折价' : '流动性溢价'
```

## 开发规范

### 代码结构
- 遵循微信小程序开发规范
- 模块化设计，职责分离
- 统一的错误处理机制

### 性能优化
- 图片懒加载
- 数据分页加载
- 组件按需加载
- 缓存机制

### 用户体验
- Loading状态管理
- 错误提示友好
- 网络异常处理
- 操作反馈及时

## 部署配置

### 开发环境
1. 安装微信开发者工具
2. 导入项目代码
3. 配置AppID
4. 启动开发调试

### 生产部署
```bash
# 使用VSCode任务自动部署
npm run deploy:preview  # 预览版本
npm run deploy:upload   # 正式版本
```

## 测试覆盖

### 单元测试
- 工具函数测试覆盖率：100%
- 埋点功能测试覆盖率：100%
- 页面逻辑测试覆盖率：90%+

### 测试运行
```bash
npm test                # 运行所有测试
npm run test:watch      # 监听模式
npm run test:coverage   # 生成覆盖率报告
```

## 数据埋点

### 用户行为跟踪
- 搜索行为：关键词、结果数量
- 点击行为：列表位置、股票信息  
- 功能使用：收藏、分享、切换
- 页面交互：tab切换、时间范围

### 埋点事件
```javascript
// 搜索提交
track.searchSubmit(keyword, resultCount)

// 股票点击
track.searchResultClick(symbol, name, position)

// 收藏操作
track.favoriteAdd(symbol, name, source)
```

## 版本历史

### v1.0.0 (当前版本)
- ✅ 核心搜索功能
- ✅ 市值图表展示
- ✅ 自选股管理
- ✅ 实际换手率分析
- ✅ 滑动交互优化
- ✅ 单元测试覆盖

## 未来规划

### 功能增强
- [ ] 股票对比功能
- [ ] 价格预警推送
- [ ] 更多技术指标
- [ ] 行业分析功能

### 技术优化
- [ ] 性能监控
- [ ] 错误上报
- [ ] 灰度发布
- [ ] A/B测试

## 贡献指南

1. Fork项目仓库
2. 创建功能分支
3. 提交代码变更
4. 运行测试确保通过
5. 提交Pull Request

## 许可证

MIT License - 详见 [LICENSE](../LICENSE) 文件

---

**开发团队**: Claude Code Assistant  
**最后更新**: 2025年1月31日