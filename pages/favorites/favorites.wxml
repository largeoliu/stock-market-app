<!--pages/favorites/favorites.wxml-->
<view class="container">
  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading">
    <loading></loading>
    <text class="loading-text">加载中...</text>
  </view>

  <!-- 空状态 -->
  <view wx:elif="{{isEmpty}}" class="empty-state">
    <text class="empty-icon">💼</text>
    <text class="empty-title">暂无收藏</text>
    <text class="empty-desc">去搜索一些感兴趣的股票吧</text>
    <navigator url="/pages/search/search" class="empty-action">
      <button class="btn-primary">开始搜索</button>
    </navigator>
  </view>

  <!-- 收藏列表 -->
  <view wx:else>
    <!-- 顶部操作栏 -->
    <view class="action-bar">
      <view class="stock-count">
        <text>共 {{favoriteStocks.length}} 只股票</text>
      </view>
      <text class="clear-all-btn" bindtap="clearAllFavorites">清空</text>
    </view>

    <!-- 收藏股票列表 -->
    <view class="favorites-list">
      <view 
        wx:for="{{favoriteStocks}}" 
        wx:key="symbol"
        class="favorite-item card"
        data-stock="{{item}}"
        bindtap="onFavoriteTap"
      >
        <view class="stock-info">
          <view class="stock-name">{{item.name}}</view>
          <view class="stock-detail">
            <text class="stock-code">{{item.symbol}}</text>
            <text class="stock-market">{{item.market}}</text>
          </view>
          <view class="favorite-time">
            收藏于 {{item.formatTime || '--'}}
          </view>
        </view>
        
        <view class="favorite-actions">
          <view 
            class="delete-btn"
            data-index="{{index}}"
            bindtap="onDeleteFavorite"
          >
            <text class="delete-icon">🗑️</text>
          </view>
        </view>
      </view>
    </view>

    <!-- 使用提示 -->
    <view class="usage-tips card">
      <view class="tips-title">使用提示</view>
      <view class="tips-content">
        <text class="tip-item">• 点击股票可查看详细的市值走势</text>
        <text class="tip-item">• 在股票详情页可以取消收藏</text>
        <text class="tip-item">• 收藏的股票会同步保存到本地</text>
      </view>
    </view>
  </view>
</view>