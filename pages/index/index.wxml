<!--pages/index/index.wxml-->
<view class="container">
  <!-- æœç´¢æ  -->
  <view class="search-bar" bindtap="onSearchTap">
    <view class="search-input">
      <text class="search-icon">ğŸ”</text>
      <text class="search-placeholder">æœç´¢è‚¡ç¥¨ä»£ç æˆ–åç§°</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading">
    <loading></loading>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- ä¸»è¦å†…å®¹ -->
  <view wx:else>
    <!-- çƒ­é—¨è‚¡ç¥¨ -->
    <view class="section">
      <view class="section-header">
        <text class="section-title">çƒ­é—¨è‚¡ç¥¨</text>
      </view>
      <view class="stock-list">
        <view 
          wx:for="{{hotStocks}}" 
          wx:key="symbol" 
          class="stock-item card"
          data-stock="{{item}}"
          bindtap="onStockTap"
        >
          <view class="stock-info">
            <view class="stock-name">{{item.name}}</view>
            <view class="stock-code">{{item.symbol}} Â· {{item.market}}</view>
          </view>
          <view class="stock-price">
            <view class="price">Â¥{{item.price}}</view>
            <view class="price-change {{item.change >= 0 ? 'text-success' : 'text-danger'}}">
              {{item.change >= 0 ? '+' : ''}}{{item.change}} ({{item.change >= 0 ? '+' : ''}}{{item.changePercent}}%)
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- æœ€è¿‘æœç´¢ -->
    <view wx:if="{{recentSearches.length > 0}}" class="section">
      <view class="section-header">
        <text class="section-title">æœ€è¿‘æœç´¢</text>
        <text class="clear-btn" bindtap="clearRecentSearches">æ¸…é™¤</text>
      </view>
      <view class="recent-list">
        <view 
          wx:for="{{recentSearches}}" 
          wx:key="symbol"
          class="recent-item"
          data-stock="{{item}}"
          bindtap="onStockTap"
        >
          <view class="recent-info">
            <text class="recent-name">{{item.name}}</text>
            <text class="recent-code">{{item.symbol}}</text>
          </view>
          <text class="arrow-icon">â€º</text>
        </view>
      </view>
    </view>

    <!-- åŠŸèƒ½è¯´æ˜ -->
    <view class="section">
      <view class="card feature-intro">
        <view class="feature-title">åŠŸèƒ½ä»‹ç»</view>
        <view class="feature-list">
          <view class="feature-item">
            <text class="feature-icon">ğŸ”</text>
            <text>æ”¯æŒAè‚¡ã€æ¸¯è‚¡ã€ç¾è‚¡æœç´¢</text>
          </view>
          <view class="feature-item">
            <text class="feature-icon">ğŸ“ˆ</text>
            <text>æŸ¥çœ‹å†å²å¸‚å€¼å˜åŒ–è¶‹åŠ¿</text>
          </view>
          <view class="feature-item">
            <text class="feature-icon">â°</text>
            <text>å¤šæ—¶é—´èŒƒå›´æ•°æ®åˆ†æ</text>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>