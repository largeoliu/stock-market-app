<!--pages/index/index.wxml-->
<view class="container">
  <!-- 搜索栏 -->
  <view class="search-bar" bindtap="onSearchTap">
    <view class="search-input">
      <text class="search-icon">🔍</text>
      <text class="search-placeholder">搜索股票代码或名称</text>
    </view>
  </view>

  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading">
    <loading></loading>
    <text class="loading-text">加载中...</text>
  </view>

  <!-- 主要内容 -->
  <view wx:else>
    <!-- 最近搜索 -->
    <view wx:if="{{recentSearches.length > 0}}" class="section">
      <view class="section-header">
        <text class="section-title">最近搜索</text>
        <text class="clear-btn" bindtap="clearRecentSearches">清除</text>
      </view>
      <view class="recent-list">
        <view 
          wx:for="{{recentSearches}}" 
          wx:key="symbol"
          class="recent-item"
          data-stock="{{item}}"
          bindtap="onStockTap"
        >
          <view class="recent-info">
            <text class="recent-name">{{item.name}}</text>
            <text class="recent-code">{{item.symbol}}</text>
          </view>
          <text class="arrow-icon">›</text>
        </view>
      </view>
    </view>
  </view>
</view>